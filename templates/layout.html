<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %} - Sistema de Chamados</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="page-wrapper">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">Sistema de Chamados</h1>
            </div>

            {% if user %}
            <nav class="sidebar-nav">
                <ul>
                    {% if user.is_admin %}
                        <li><a href="{{ url_for('dashboard') }}" class="{{ 'active' if request.endpoint == 'dashboard' else '' }}">Dashboard</a></li>
                        <li><a href="{{ url_for('abrir_chamado_admin') }}" class="{{ 'active' if request.endpoint == 'abrir_chamado_admin' else '' }}">Abrir Chamado (Admin)</a></li>
                        <li><a href="{{ url_for('admin_index') }}" class="{{ 'active' if 'admin_index' in request.endpoint else '' }}">Gestão de Usuários</a></li>
                    {% else %}
                        <li><a href="{{ url_for('index') }}" class="{{ 'active' if request.endpoint == 'index' else '' }}">Abrir Chamado</a></li>
                    {% endif %}

                    <li><a href="{{ url_for('meus_chamados') }}" class="{{ 'active' if request.endpoint == 'meus_chamados' else '' }}">Meus Chamados</a></li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <p style="text-align: center; color: #adb5bd; font-size: 0.9em;">Logado como:<br><b>{{ user.responsavel }}</b></p>
                <a href="{{ url_for('logout') }}" class="logout-button">Sair</a>
            </div>
            {% endif %}
        </aside>

        <main class="main-content">
            <div class="container">
                {% block content %}{% endblock %}
            </div>
        </main>
    </div>
</body>
</html>